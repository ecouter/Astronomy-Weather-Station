import { Button, VerticalBox, HorizontalBox } from "std-widgets.slint";

export component MainWindow inherits Window {
    title: "Weather Station Frontend";
    width: 1200px;
    height: 800px;
    preferred-width: 1200px;
    preferred-height: 800px;

    in property <bool> loading;
    in property <string> error_message;
    in property <image> top_left_image;
    in property <image> top_right_image;
    in property <image> bottom_left_image;
    in property <image> bottom_right_image;
    in property <image> legend_image;

    HorizontalBox {
        // Left side: 4 vertical windows (1/3 width)
        Rectangle {
            width: 400px; // 1/3 of 1200
            height: 100%;

            VerticalBox {
                // Top window (blank)
                Rectangle {
                    height: 25%;
                }

                // Second window (blank)
                Rectangle {
                    height: 25%;
                }

                // Third window (blank)
                Rectangle {
                    height: 25%;
                }

                // Bottom window (blank)
                Rectangle {
                    height: 25%;
                }
            }
        }

        // Right side: weather images and bottom area (2/3 width)
        VerticalBox {
            width: 800px; // 2/3 of 1200

            // Top 2/3: 2x2 grid of weather images
            VerticalBox {
                height: 533px; // 2/3 of 800

                // Top row
                HorizontalBox {
                    height: 50%;

                    // Top-left: GOES-East_1km_VisibleIRSandwich-NightMicrophysicsIR
                    Rectangle {
                        width: 50%;

                        if (loading) : Text {
                            text: "Loading...";
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }

                        if (!loading && error_message == "") : Image {
                            source: top_left_image;
                            width: 100%;
                            height: 100%;
                            image-fit: fill;
                        }

                        if (!loading && error_message != "") : Text {
                            text: error_message;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            color: #ff0000;
                        }
                    }

                    // Top-right: GOES-East_2km_NightMicrophysics
                    Rectangle {
                        width: 50%;

                        if (loading) : Text {
                            text: "Loading...";
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }

                        if (!loading && error_message == "") : Image {
                            source: top_right_image;
                            width: 100%;
                            height: 100%;
                            image-fit: fill;
                        }

                        if (!loading && error_message != "") : Text {
                            text: error_message;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            color: #ff0000;
                        }
                    }
                }

                // Bottom row
                HorizontalBox {
                    height: 50%;

                    // Bottom-left: GOES-East_1km_NaturalColor
                    Rectangle {
                        width: 50%;

                        if (loading) : Text {
                            text: "Loading...";
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }

                        if (!loading && error_message == "") : Image {
                            source: bottom_left_image;
                            width: 100%;
                            height: 100%;
                            image-fit: fill;
                        }

                        if (!loading && error_message != "") : Text {
                            text: error_message;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            color: #ff0000;
                        }
                    }

                    // Bottom-right: HRDPS.CONTINENTAL_PN-SLP (blended) with legend overlaid
                    Rectangle {
                        width: 50%;

                        if (loading) : Text {
                            text: "Loading...";
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }

                        if (!loading && error_message == "") : Rectangle {
                            width: 100%;
                            height: 100%;

                            // Main image
                            Image {
                                source: bottom_right_image;
                                width: 100%;
                                height: 100%;
                                image-fit: fill;
                            }

                            // Legend overlaid on bottom-right
                            Image {
                                source: legend_image;
                                width: 100%;
                                height: 100%;
                                x: parent.width * 0.4;
                                y: parent.height * 0;
                                image-fit: contain;
                            }
                        }

                        if (!loading && error_message != "") : Text {
                            text: error_message;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            color: #ff0000;
                        }
                    }
                }
            }

            // Bottom 1/3: blank for now
            Rectangle {
                height: 267px; // 1/3 of 800
            }
        }
    }
}
