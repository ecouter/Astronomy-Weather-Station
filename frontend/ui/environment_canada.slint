import { VerticalBox, Button, HorizontalBox } from "std-widgets.slint";

export component EnvironmentCanadaPage inherits Rectangle {
    background: #1c1c1c;
    height: 720px;
    width: 1280px;
    in property <image> clouds_image;
    in property <image> surface_wind_image;
    in property <image> seeing_image;
    in property <image> temperature_image;
    in property <image> transparency_image;
    in property <image> relative_humidity_image;
    in-out property <bool> show_zoomed_image: false;
    in-out property <image> zoomed_image;
    in-out property <string> zoomed_title;
    callback go_back();

    VerticalLayout {
        padding-left: 25px;
        padding-right: 35px;
        padding-top: 20px;
        padding-bottom: 20px;
        spacing: 10px;

        // Back button and title
        HorizontalLayout {
            height: 40px;
            Button {
                text: "Back";
                clicked => { go_back(); }
            }
            Text {
                text: "Environment Canada Astro predictions";
                font-size: 36px;
                color: #ffffff;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
        }

        // Main content grid
        HorizontalLayout {
            spacing: 100px;

            // Column 1: Clouds and Surface Wind
            VerticalLayout {
                spacing:10px;

                Text {
                    text: "Clouds";
                    font-size: 24px;
                    color: #ffffff;
                    horizontal-alignment: center;
                    height: 30px;
                }

                TouchArea {
                    width: 336px;
                    height: 280px;
                    Image {
                        source: clouds_image;
                        width: 100%;
                        height: 100%;
                        image-fit: fill;
                    }
                    clicked => {
                        zoomed_image = clouds_image;
                        zoomed_title = "Clouds";
                        show_zoomed_image = true;
                    }
                }

                Text {
                    text: "Surface Wind";
                    font-size: 24px;
                    color: #ffffff;
                    horizontal-alignment: center;
                    height: 30px;
                }

                TouchArea {
                    width: 336px;
                    height: 280px;
                    Image {
                        source: surface_wind_image;
                        width: 100%;
                        height: 100%;
                        image-fit: fill;
                    }
                    clicked => {
                        zoomed_image = surface_wind_image;
                        zoomed_title = "Surface Wind";
                        show_zoomed_image = true;
                    }
                }
            }

            // Column 2: Seeing and Temperature
            VerticalLayout {
                spacing: 10px;

                Text {
                    text: "Seeing";
                    font-size: 24px;
                    color: #ffffff;
                    horizontal-alignment: center;
                    height: 30px;
                }

                TouchArea {
                    width: 336px;
                    height: 280px;
                    Image {
                        source: seeing_image;
                        width: 100%;
                        height: 100%;
                        image-fit: fill;
                    }
                    clicked => {
                        zoomed_image = seeing_image;
                        zoomed_title = "Seeing";
                        show_zoomed_image = true;
                    }
                }

                Text {
                    text: "Temperature";
                    font-size: 24px;
                    color: #ffffff;
                    horizontal-alignment: center;
                    height: 30px;
                }

                TouchArea {
                    width: 336px;
                    height: 280px;
                    Image {
                        source: temperature_image;
                        width: 100%;
                        height: 100%;
                        image-fit: fill;
                    }
                    clicked => {
                        zoomed_image = temperature_image;
                        zoomed_title = "Temperature";
                        show_zoomed_image = true;
                    }
                }
            }

            // Column 3: Transparency and Relative Humidity
            VerticalLayout {
                spacing: 10px;

                Text {
                    text: "Transparency";
                    font-size: 24px;
                    color: #ffffff;
                    horizontal-alignment: center;
                    height: 30px;
                }

                TouchArea {
                    width: 336px;
                    height: 280px;
                    Image {
                        source: transparency_image;
                        width: 100%;
                        height: 100%;
                        image-fit: fill;
                    }
                    clicked => {
                        zoomed_image = transparency_image;
                        zoomed_title = "Transparency";
                        show_zoomed_image = true;
                    }
                }

                Text {
                    text: "Relative Humidity";
                    font-size: 24px;
                    color: #ffffff;
                    horizontal-alignment: center;
                    height: 30px;
                }

                TouchArea {
                    width: 336px;
                    height: 280px;
                    Image {
                        source: relative_humidity_image;
                        width: 100%;
                        height: 100%;
                        image-fit: fill;
                    }
                    clicked => {
                        zoomed_image = relative_humidity_image;
                        zoomed_title = "Relative Humidity";
                        show_zoomed_image = true;
                    }
                }
            }
        }
    }

    // Zoom overlay
    if show_zoomed_image: Rectangle {
        background: #000000cc; // Semi-transparent black background
        width: 100%;
        height: 100%;

        VerticalLayout {
            alignment: center;
            spacing: 20px;
            padding-left: 40px;

            HorizontalLayout {
                Text {
                    text: zoomed_title;
                    font-size: 48px;
                    color: #ffffff;
                    horizontal-alignment: center;
                }

                Text {
                    text: "Click image to close";
                    font-size: 24px;
                    vertical-alignment: center;
                    color: #ff0000;
                    horizontal-alignment: center;
                }
            }

            TouchArea {
                width: 1200px;
                height: 600px;
                Image {
                    source: zoomed_image;
                    width: 100%;
                    height: 100%;
                    image-fit: contain;
                }
                clicked => {
                    show_zoomed_image = false;
                }
            }

            Text {
                text: "Click image to close";
                font-size: 24px;
                color: #cccccc;
                horizontal-alignment: center;
            }
        }
    }
}
